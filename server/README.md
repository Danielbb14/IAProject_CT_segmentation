# IAProject CT Segmentation Server

## Setup & Usage

### 1. Environment Setup

Navigate to the `server/` directory and install the required Python dependencies:

```bash
cd server
pip install -r requirements.txt
```

### 2. Configuration Check

Ensure the configuration in `server/config.json` is correct:

*   **nnunet_paths**: `"results_folder": "./nnunet_results"`
*   **slicer_server**: Port `1527`.
*   **inference_server**: Port `8000`.

### 3. Launching the Servers

You must run **two separate processes** in parallel. Open two terminal windows and run the following commands from the `server/` directory:

**Terminal 1: Slicer Interface Server**
```bash
python nninteractive_slicer_server/main3.py
```

**Terminal 2: Inference Server**
```bash
uvicorn nninteractive_slicer_server.IsacModelInstance:app --host 0.0.0.0 --port 8000
```

### 4. Connecting 3D Slicer

1.  Open **3D Slicer**.
2.  Ensure the **nnInteractive** extension is installed/loaded.
3.  Navigate to the **nnInteractive** module.
4.  Go to the **Configuration** tab.
5.  Set the **Server URL** to:
    ```
    http://localhost:1527
    ```

### 5. Running a Prediction

1.  **Load Data**: Drag and drop your CT image (e.g., `.nii.gz`) into Slicer.
2.  **Select Tool**: In the **nnInteractive** module, go to the **Interactive Prompts** tab.
3.  **Draw Bounding Box**: Click the **BBox** button and draw a box around the lesion of interest.
4.  **View Result**: The segmentation mask will be generated by the server and automatically displayed in the Segment Editor.

